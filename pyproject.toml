[build-system]
requires = [
    "setuptools>=61",
    "setuptools-scm[toml]>=6.2",
] #TODO: add this to the merge request

# Project
[project]
name = "pgm"
#dynamic = ["version"]
description = "Python package for probabilistic network analysis."
version = "1.0"
requires-python = ">=3.8"
dependencies = [
    "argparse",
    "networkx",
    "numpy==1.22.0",
    "pandas",
    "pyyaml",
    "pytest",
    "scikit-learn",
    "scikit-tensor-py3",
    "scipy==1.10.0",
    "termcolor",
]

# Development
[project.optional-dependencies]
dev = [
    'autopep8',
    'coverage',
    'isort',
    'mypy',
    'pylint',
    'tox',
    'unittest-xml-reporting',
]

# Setuptools
[tool.setuptools]
packages = ["pgm"]

[tool.setuptools.package-data]
pgm = ["config/model", "config/data"]


[tool.setuptools.dynamic]
dependencies = { file = ["requirements.txt"] }

[tool.setuptools.dynamic.readme]
file = "README.md"

# Autopep8
[tool.autopep8]
max_line_length = 100
ignore = "E501,W6"    # or ["E501", "W6"]
in-place = true
recursive = true
aggressive = 3

# isort
[tool.isort]
profile = "google"
force_single_line = false
multi_line_output = 4
line_length = 100
src_paths = ["pgm"]

# Pylint
[tool.pylint.MASTER]
disable = ["attribute-defined-outside-init"]

[tool.pylint.FORMAT]
max-line-length = 100

[tool.pylint.MESSAGES_CONTROL]
disable = "invalid-name"

# Coverage
[tool.coverage.run]
branch = true
source = ["pgm"]
omit = ["tests", "*/__init__.py", "*/version.py"]

[tool.coverage.report]
show_missing = true

#[tool.coverage.cmd_options]
#skip_empty = true

# MyPy
[tool.mypy]
ignore_missing_imports = true

[tool.tox]
legacy_tox_ini = """
[tox]
envlist = py37,py38,py39

[testenv]
description = run unit tests and generate xml reports
commands = python -m xmlrunner
"""
